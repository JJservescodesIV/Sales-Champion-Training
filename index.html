<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCANA Home Warranty - Sales Champion Training</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 2.5em;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .game-screen {
            display: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .game-screen.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .start-screen {
            text-align: center;
        }

        .start-screen h2 {
            font-size: 2em;
            margin-bottom: 20px;
            color: #ffd700;
        }

        .start-screen p {
            font-size: 1.1em;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .btn.secondary {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
        }

        .battle-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .battle-main {
            display: flex;
            flex-direction: column;
        }

        .battle-arena {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 20px;
        }

        .coaching-panel {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 20px;
            height: fit-content;
        }

        .coaching-title {
            color: #ffd700;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .coaching-content {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #ffd700;
        }

        .psychology-insight {
            background: rgba(116, 185, 255, 0.1);
            border: 1px solid #74b9ff;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .psychology-insight h5 {
            color: #74b9ff;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .effectiveness-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
        }

        .super-effective {
            background: #00b894;
            color: white;
        }

        .effective {
            background: #ffd700;
            color: #2d3436;
        }

        .not-effective {
            background: #e17055;
            color: white;
        }

        .player-side, .enemy-side {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .character {
            text-align: center;
            margin-bottom: 20px;
        }

        .character-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .character-avatar {
            width: 120px;
            height: 120px;
            margin: 0 auto 15px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            border: 3px solid #ffd700;
        }

        .player-avatar {
            background: linear-gradient(45deg, #00b894, #00a085);
        }

        .enemy-avatar {
            background: linear-gradient(45deg, #e17055, #d63031);
        }

        .health-bar {
            background: rgba(0,0,0,0.3);
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .health-fill {
            height: 100%;
            background: linear-gradient(45deg, #00b894, #55efc4);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9em;
            font-weight: bold;
        }

        .enemy-health .health-fill {
            background: linear-gradient(45deg, #e17055, #fd79a8);
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .stat {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.9em;
        }

        .battle-log {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 10px;
            height: 200px;
            overflow-y: auto;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .log-entry {
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
        }

        .log-entry.coach-tip {
            background: rgba(255, 215, 0, 0.2);
            border-left: 4px solid #ffd700;
        }

        .log-entry.psychology {
            background: rgba(116, 185, 255, 0.2);
            border-left: 4px solid #74b9ff;
        }

        .actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            position: relative;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #ffd700;
            transform: translateY(-2px);
        }

        .action-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .action-title {
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .action-description {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .progress-bar {
            background: rgba(0,0,0,0.3);
            height: 10px;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #ffd700, #f39c12);
            transition: width 0.3s ease;
        }

        .victory-screen, .defeat-screen {
            text-align: center;
            padding: 40px;
        }

        .victory-screen h2 {
            color: #00b894;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .defeat-screen h2 {
            color: #e17055;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .tips {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid #ffd700;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .tips h4 {
            color: #ffd700;
            margin-bottom: 10px;
        }

        @media (max-width: 1024px) {
            .battle-layout {
                grid-template-columns: 1fr;
            }
            
            .coaching-panel {
                order: -1;
            }
        }

        @media (max-width: 768px) {
            .battle-arena {
                grid-template-columns: 1fr;
            }
            
            .game-container {
                padding: 10px;
            }
            
            .actions {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <div class="logo">SCANA HOME WARRANTY</div>
            <div class="subtitle">Sales Champion Training Arena</div>
        </div>

        <!-- Start Screen -->
        <div class="game-screen active" id="start-screen">
            <div class="start-screen">
                <h2>Welcome to Sales Champion Training!</h2>
                <p>Step into the arena and face your greatest challenges: customer objections! Master the art of home warranty sales through epic battles where your sales skills are your weapons.</p>
                <p>Each enemy represents a different customer objection or challenge. Use proven sales techniques to overcome them and become the ultimate Sales Champion!</p>
                <div class="tips">
                    <h4>🎯 Training Objectives:</h4>
                    <p>• Learn to overcome common objections with confidence<br>
                    • Practice value-based selling techniques<br>
                    • Master the art of closing deals<br>
                    • Build your sales expertise through repetition<br>
                    • Understand customer psychology and motivation</p>
                </div>
                <button class="btn" onclick="startGame()">Begin Training</button>
                <button class="btn secondary" onclick="showTutorial()">View Tutorial</button>
            </div>
        </div>

        <!-- Tutorial Screen -->
        <div class="game-screen" id="tutorial-screen">
            <h2>How to Play</h2>
            <div class="tips">
                <h4>🎮 Game Mechanics:</h4>
                <p><strong>Battle System:</strong> You'll face different "Objection Monsters" that represent real customer concerns and objections.</p>
                <p><strong>Sales Techniques:</strong> Choose from various sales responses and techniques to counter objections.</p>
                <p><strong>Effectiveness System:</strong> Some techniques work better against specific objections - watch for the effectiveness indicators!</p>
                <p><strong>Coaching Panel:</strong> Real-time advice appears to help you understand customer psychology and improve your approach.</p>
            </div>
            <div class="tips">
                <h4>🧠 Learning Features:</h4>
                <p><strong>Psychology Insights:</strong> Learn why customers think the way they do</p>
                <p><strong>Technique Effectiveness:</strong> Understand which approaches work best for each situation</p>
                <p><strong>Real-time Coaching:</strong> Get instant feedback on your choices</p>
                <p><strong>Improvement Tips:</strong> Specific advice on how to handle each objection type</p>
            </div>
            <button class="btn" onclick="startGame()">Start Playing</button>
            <button class="btn secondary" onclick="showStartScreen()">Back</button>
        </div>

        <!-- Battle Screen -->
        <div class="game-screen" id="battle-screen">
            <div class="battle-layout">
                <div class="battle-main">
                    <div class="battle-arena">
                        <div class="player-side">
                            <div class="character">
                                <div class="character-name">Sales Champion</div>
                                <div class="character-avatar player-avatar">🎯</div>
                                <div class="health-bar">
                                    <div class="health-fill" id="player-health" style="width: 100%">100/100 Confidence</div>
                                </div>
                                <div class="stats">
                                    <div class="stat">Level: <span id="player-level">1</span></div>
                                    <div class="stat">XP: <span id="player-xp">0</span></div>
                                    <div class="stat">Wins: <span id="player-wins">0</span></div>
                                </div>
                            </div>
                        </div>

                        <div class="enemy-side">
                            <div class="character">
                                <div class="character-name" id="enemy-name">Customer Objection</div>
                                <div class="character-avatar enemy-avatar" id="enemy-avatar">❓</div>
                                <div class="health-bar enemy-health">
                                    <div class="health-fill" id="enemy-health" style="width: 100%">100/100 Resistance</div>
                                </div>
                                <div class="stats">
                                    <div class="stat">Type: <span id="enemy-type">Objection</span></div>
                                    <div class="stat">Difficulty: <span id="enemy-difficulty">★</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="battle-log" id="battle-log">
                        <div class="log-entry">A new customer challenge appears! Choose your sales approach wisely.</div>
                    </div>

                    <div class="actions" id="battle-actions">
                        <!-- Action buttons will be populated by JavaScript -->
                    </div>
                </div>

                <div class="coaching-panel">
                    <div class="coaching-title">
                        🧠 Sales Coach
                    </div>
                    <div class="coaching-content" id="coaching-content">
                        <p><strong>Customer Psychology:</strong> Understanding your customer's mindset is key to choosing the right approach.</p>
                        <p>Select a sales technique to see detailed advice and effectiveness analysis.</p>
                    </div>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="battle-progress" style="width: 0%"></div>
            </div>
        </div>

        <!-- Victory Screen -->
        <div class="game-screen" id="victory-screen">
            <div class="victory-screen">
                <h2>🏆 Objection Overcome!</h2>
                <p>Excellent work! You've successfully addressed the customer's concerns and demonstrated the value of SCANA Home Warranty protection.</p>
                <div class="tips" id="victory-tips">
                    <h4>💡 What You Did Well:</h4>
                    <p id="victory-feedback">You used effective sales techniques to build trust and demonstrate value.</p>
                </div>
                <div class="stats">
                    <div class="stat">XP Gained: <span id="xp-gained">50</span></div>
                    <div class="stat">New Level: <span id="new-level">1</span></div>
                </div>
                <button class="btn" onclick="nextBattle()">Face Next Challenge</button>
                <button class="btn secondary" onclick="showStartScreen()">Return to Menu</button>
            </div>
        </div>

        <!-- Defeat Screen -->
        <div class="game-screen" id="defeat-screen">
            <div class="defeat-screen">
                <h2>💭 Learning Opportunity</h2>
                <p>The customer wasn't convinced this time, but that's how we learn! Every objection is a chance to improve your approach.</p>
                <div class="tips" id="defeat-tips">
                    <h4>📚 Learning Points:</h4>
                    <p id="defeat-feedback">Consider trying different approaches or addressing the core concern more directly.</p>
                </div>
                <button class="btn" onclick="retryBattle()">Try Again</button>
                <button class="btn secondary" onclick="showStartScreen()">Return to Menu</button>
            </div>
        </div>
    </div>

    <script>
        class SalesTrainingGame {
            constructor() {
                this.player = {
                    health: 100,
                    maxHealth: 100,
                    level: 1,
                    xp: 0,
                    wins: 0
                };
                
                this.currentEnemy = null;
                this.battleLog = [];
                this.currentBattleIndex = 0;
                
                this.enemies = [
                    {
                        name: "The Skeptical Homeowner",
                        avatar: "🤔",
                        type: "Trust Issue",
                        difficulty: "★",
                        health: 80,
                        maxHealth: 80,
                        objection: "I don't trust home warranty companies. How do I know you're not just trying to take my money?",
                        weaknesses: ["social_proof", "transparency"],
                        psychology: "This customer has been burned before or heard negative stories. They need evidence and transparency to build trust.",
                        coaching: "Focus on building credibility through testimonials, company backing, and transparent processes. Avoid pushing too hard - let the facts speak."
                    },
                    {
                        name: "The DIY Expert",
                        avatar: "🔧",
                        type: "Self-Reliance",
                        difficulty: "★★",
                        health: 100,
                        maxHealth: 100,
                        objection: "I'm pretty handy. I can fix most things myself. Why would I need a warranty?",
                        weaknesses: ["time_value", "complexity"],
                        psychology: "This customer takes pride in their skills. Don't challenge their abilities - acknowledge them while highlighting complexity and time value.",
                        coaching: "Respect their expertise but focus on scenarios beyond basic repairs: complex diagnostics, specialized tools, time constraints, and warranty parts."
                    },
                    {
                        name: "The Budget-Conscious Customer",
                        avatar: "💰",
                        type: "Price Objection",
                        difficulty: "★★",
                        health: 90,
                        maxHealth: 90,
                        objection: "This seems expensive. I'm not sure I can afford another monthly payment.",
                        weaknesses: ["cost_benefit", "payment_options"],
                        psychology: "Money is tight and they're counting every dollar. They need to see clear financial benefit and flexible options.",
                        coaching: "Break down the cost comparison with actual repair costs. Show how one major repair costs more than years of protection. Mention payment flexibility."
                    },
                    {
                        name: "The New Home Owner",
                        avatar: "🏠",
                        type: "Timing Objection",
                        difficulty: "★",
                        health: 70,
                        maxHealth: 70,
                        objection: "My home is brand new. Nothing is going to break anytime soon.",
                        weaknesses: ["prevention", "manufacturer_limits"],
                        psychology: "They're in the 'honeymoon phase' with their new home. They need education about when things actually break and warranty gaps.",
                        coaching: "Educate about manufacturer warranty limitations, installation issues, and the reality that even new homes have problems. Position as smart prevention."
                    },
                    {
                        name: "The Insurance Confused",
                        avatar: "📋",
                        type: "Coverage Confusion",
                        difficulty: "★★",
                        health: 85,
                        maxHealth: 85,
                        objection: "I already have homeowner's insurance. Isn't that enough?",
                        weaknesses: ["coverage_difference", "education"],
                        psychology: "They genuinely don't understand the difference. This is an education opportunity, not a hard sell situation.",
                        coaching: "Clearly explain what homeowner's insurance covers vs. home warranty. Use analogies like car insurance vs. extended warranty. Don't compete - complement."
                    },
                    {
                        name: "The Procrastinator",
                        avatar: "⏳",
                        type: "Decision Delay",
                        difficulty: "★★★",
                        health: 120,
                        maxHealth: 120,
                        objection: "I need to think about it and discuss with my spouse first.",
                        weaknesses: ["urgency", "decision_framework"],
                        psychology: "They may be interested but avoid decisions or need spousal buy-in. They need help making the decision process easier.",
                        coaching: "Create urgency without pressure. Offer to speak with both spouses. Provide a clear decision framework. Address what specific concerns they need to think about."
                    }
                ];
                
                this.salesTechniques = {
                    value_proposition: {
                        name: "Value Proposition",
                        description: "Highlight comprehensive protection and peace of mind",
                        damage: [25, 35],
                        response: "SCANA Home Warranty provides comprehensive protection for your home's essential systems and appliances. When something breaks, we handle the diagnosis, repair, and replacement - saving you thousands in unexpected costs.",
                        insights: {
                            "The Skeptical Homeowner": { effective: "moderate", advice: "Good start, but they need proof this value is real. Follow up with testimonials or guarantees." },
                            "The DIY Expert": { effective: "low", advice: "They already see value in their own skills. Focus on time savings and complex repairs instead." },
                            "The Budget-Conscious Customer": { effective: "high", advice: "Perfect! They need to see financial value. Break down specific cost savings with real numbers." },
                            "The New Home Owner": { effective: "moderate", advice: "They don't see immediate need. Connect value to future protection and prevention." },
                            "The Insurance Confused": { effective: "low", advice: "They're confused about coverage differences. Clarify what value means in home warranty context." },
                            "The Procrastinator": { effective: "moderate", advice: "Good foundation, but they need help making the decision. Add urgency or decision framework." }
                        }
                    },
                    social_proof: {
                        name: "Social Proof",
                        description: "Share success stories and testimonials",
                        damage: [20, 30],
                        response: "Thousands of homeowners across South Carolina trust SCANA Home Warranty. Last month alone, we saved our customers over $500,000 in repair costs. Mrs. Johnson from Columbia saved $2,800 when her HVAC system failed.",
                        insights: {
                            "The Skeptical Homeowner": { effective: "high", advice: "Excellent choice! Skeptical customers need proof from others. Share specific, local examples." },
                            "The DIY Expert": { effective: "moderate", advice: "Good, but frame stories around complex repairs that challenged even skilled homeowners." },
                            "The Budget-Conscious Customer": { effective: "high", advice: "Perfect! Show real savings from real people. Use relatable financial situations." },
                            "The New Home Owner": { effective: "high", advice: "Great! New homeowners trust other homeowners' experiences. Share stories from similar situations." },
                            "The Insurance Confused": { effective: "moderate", advice: "Helpful, but include stories that clarify the insurance vs warranty difference." },
                            "The Procrastinator": { effective: "low", advice: "Social proof helps, but they need urgency. Share stories about people who waited too long." }
                        }
                    },
                    risk_mitigation: {
                        name: "Risk Mitigation",
                        description: "Address the financial risks of home repairs",
                        damage: [30, 40],
                        response: "Home repairs can cost thousands without warning. A single HVAC repair averages $1,200, and a water heater replacement costs $1,500. Our protection starts at just a fraction of what one major repair would cost.",
                        insights: {
                            "The Skeptical Homeowner": { effective: "moderate", advice: "Good foundation, but they need to trust the numbers. Back up statistics with verifiable sources." },
                            "The DIY Expert": { effective: "low", advice: "They think they can avoid these costs. Focus on risks they can't DIY: complex diagnostics, specialized parts." },
                            "The Budget-Conscious Customer": { effective: "high", advice: "Excellent! This speaks directly to their financial fears. Be specific about local repair costs." },
                            "The New Home Owner": { effective: "high", advice: "Perfect! They don't realize these risks exist. Education about future costs is key." },
                            "The Insurance Confused": { effective: "moderate", advice: "Good, but clarify these are costs insurance WON'T cover. Show the coverage gap." },
                            "The Procrastinator": { effective: "moderate", advice: "Creates some urgency, but add timeframe - 'these costs could hit any day.'" }
                        }
                    },
                    urgency: {
                        name: "Create Urgency",
                        description: "Emphasize time-sensitive benefits",
                        damage: [25, 35],
                        response: "Protection begins 16 days after enrollment, so the sooner you sign up, the sooner you're covered. Home systems don't wait for convenient times to fail - they often break during the worst possible moments.",
                        insights: {
                            "The Skeptical Homeowner": { effective: "low", advice: "Urgency can seem pushy to skeptical customers. Build trust first, then add gentle time pressure." },
                            "The DIY Expert": { effective: "low", advice: "They're not worried about timing since they can 'fix it themselves.' Focus on complexity urgency instead." },
                            "The Budget-Conscious Customer": { effective: "moderate", advice: "Moderate impact. They're more concerned about cost than timing. Combine with payment options." },
                            "The New Home Owner": { effective: "moderate", advice: "Somewhat effective - they don't expect immediate problems. Focus on protection starting soon." },
                            "The Insurance Confused": { effective: "low", advice: "Urgency won't help confusion. They need education first, then urgency makes sense." },
                            "The Procrastinator": { effective: "high", advice: "Perfect! This directly addresses their delay tendency. Create real time pressure." }
                        }
                    },
                    transparency: {
                        name: "Transparency & Trust",
                        description: "Build trust through clear communication",
                        damage: [20, 30],
                        response: "We believe in complete transparency. Here's exactly what's covered, what's not, and how our process works. We're backed by The Manchester Group and regulated by South Carolina state authorities.",
                        insights: {
                            "The Skeptical Homeowner": { effective: "high", advice: "Excellent! This directly addresses their core concern. Provide specific details and documentation." },
                            "The DIY Expert": { effective: "moderate", advice: "Good approach. They appreciate straightforward information. Include technical details about coverage." },
                            "The Budget-Conscious Customer": { effective: "moderate", advice: "Helpful for trust, but they need cost transparency too. Include pricing breakdowns." },
                            "The New Home Owner": { effective: "moderate", advice: "Good foundation. New buyers appreciate honesty. Include new home specific coverage details." },
                            "The Insurance Confused": { effective: "high", advice: "Perfect! Clear explanations help confused customers. Use simple comparisons and examples." },
                            "The Procrastinator": { effective: "low", advice: "Transparency helps but doesn't solve delay. Add what happens if they wait too long." }
                        }
                    },
                    cost_benefit: {
                        name: "Cost-Benefit Analysis",
                        description: "Break down the financial benefits clearly",
                        damage: [35, 45],
                        response: "Let's do the math: our annual protection costs less than one major appliance repair. With coverage up to $4,000 per incident for major systems, you could save 5-10 times your investment on just one claim.",
                        insights: {
                            "The Skeptical Homeowner": { effective: "moderate", advice: "Good logical approach, but they need to trust the numbers. Provide third-party validation." },
                            "The DIY Expert": { effective: "moderate", advice: "Numbers help, but focus on costs they can't DIY: diagnostics, specialized tools, warranty parts." },
                            "The Budget-Conscious Customer": { effective: "high", advice: "Excellent! This is exactly what they need. Make the math crystal clear and relatable." },
                            "The New Home Owner": { effective: "high", advice: "Great! They need education about real costs. Use examples relevant to new home systems." },
                            "The Insurance Confused": { effective: "moderate", advice: "Helpful, but include what insurance WON'T pay for. Show the financial gap." },
                            "The Procrastinator": { effective: "moderate", advice: "Good foundation, but add urgency - 'every month you wait, you're at risk for these costs.'" }
                        }
                    }
                };
            }
            
            startNewBattle() {
                if (this.currentBattleIndex >= this.enemies.length) {
                    this.currentBattleIndex = 0;
                }
                
                this.currentEnemy = { ...this.enemies[this.currentBattleIndex] };
                this.currentBattleIndex++;
                
                this.updateBattleDisplay();
                this.updateCoachingPanel();
                this.addToBattleLog(`${this.currentEnemy.name} appears! They say: "${this.currentEnemy.objection}"`);
                this.createActionButtons();
            }
            
            updateCoachingPanel() {
                const coaching = document.getElementById('coaching-content');
                coaching.innerHTML = `
                    <h4>Customer Profile: ${this.currentEnemy.name}</h4>
                    <div class="psychology-insight">
                        <h5>🧠 Psychology:</h5>
                        <p>${this.currentEnemy.psychology}</p>
                    </div>
                    <div class="psychology-insight">
                        <h5>💡 Coaching Tip:</h5>
                        <p>${this.currentEnemy.coaching}</p>
                    </div>
                    <p><strong>Most Effective Against:</strong> ${this.currentEnemy.weaknesses.map(w => this.salesTechniques[w].name).join(', ')}</p>
                `;
            }
            
            updateBattleDisplay() {
                document.getElementById('enemy-name').textContent = this.currentEnemy.name;
                document.getElementById('enemy-avatar').textContent = this.currentEnemy.avatar;
                document.getElementById('enemy-type').textContent = this.currentEnemy.type;
                document.getElementById('enemy-difficulty').textContent = this.currentEnemy.difficulty;
                
                this.updateHealthBars();
                this.updatePlayerStats();
            }
            
            updateHealthBars() {
                const playerHealthPercent = (this.player.health / this.player.maxHealth) * 100;
                const enemyHealthPercent = (this.currentEnemy.health / this.currentEnemy.maxHealth) * 100;
                
                document.getElementById('player-health').style.width = playerHealthPercent + '%';
                document.getElementById('player-health').textContent = `${this.player.health}/${this.player.maxHealth} Confidence`;
                
                document.getElementById('enemy-health').style.width = enemyHealthPercent + '%';
                document.getElementById('enemy-health').textContent = `${this.currentEnemy.health}/${this.currentEnemy.maxHealth} Resistance`;
            }
            
            updatePlayerStats() {
                document.getElementById('player-level').textContent = this.player.level;
                document.getElementById('player-xp').textContent = this.player.xp;
                document.getElementById('player-wins').textContent = this.player.wins;
            }
            
            createActionButtons() {
                const actionsContainer = document.getElementById('battle-actions');
                actionsContainer.innerHTML = '';
                
                Object.keys(this.salesTechniques).forEach(key => {
                    const technique = this.salesTechniques[key];
                    const insight = technique.insights[this.currentEnemy.name];
                    const isEffective = this.currentEnemy.weaknesses.includes(key);
                    
                    let effectivenessClass = 'not-effective';
                    let effectivenessText = 'Not Effective';
                    
                    if (isEffective) {
                        effectivenessClass = 'super-effective';
                        effectivenessText = 'Super Effective';
                    } else if (insight.effective === 'high') {
                        effectivenessClass = 'effective';
                        effectivenessText = 'Effective';
                    } else if (insight.effective === 'moderate') {
                        effectivenessClass = 'effective';
                        effectivenessText = 'Moderate';
                    }
                    
                    const button = document.createElement('button');
                    button.className = 'action-btn';
                    button.innerHTML = `
                        <div class="action-title">
                            ${technique.name}
                            <span class="effectiveness-indicator ${effectivenessClass}">${effectivenessText}</span>
                        </div>
                        <div class="action-description">${technique.description}</div>
                    `;
                    button.onclick = () => this.useSalesTechnique(key);
                    actionsContainer.appendChild(button);
                });
            }
            
            useSalesTechnique(techniqueKey) {
                const technique = this.salesTechniques[techniqueKey];
                const insight = technique.insights[this.currentEnemy.name];
                const damage = Math.floor(Math.random() * (technique.damage[1] - technique.damage[0] + 1)) + technique.damage[0];
                
                const isEffective = this.currentEnemy.weaknesses.includes(techniqueKey);
                let finalDamage = damage;
                
                if (isEffective) {
                    finalDamage = Math.floor(damage * 1.5);
                } else if (insight.effective === 'low') {
                    finalDamage = Math.floor(damage * 0.7);
                } else if (insight.effective === 'moderate') {
                    finalDamage = damage;
                } else if (insight.effective === 'high') {
                    finalDamage = Math.floor(damage * 1.2);
                }
                
                this.currentEnemy.health = Math.max(0, this.currentEnemy.health - finalDamage);
                
                // Add battle log entries
                this.addToBattleLog(`You used ${technique.name}!`, 'normal');
                this.addToBattleLog(`"${technique.response}"`, 'normal');
                
                // Add coaching feedback
                this.addToBattleLog(`💡 Coach: ${insight.advice}`, 'coach-tip');
                
                if (isEffective) {
                    this.addToBattleLog(`🎯 Super Effective! Customer resistance decreased by ${finalDamage} points!`, 'normal');
                } else {
                    this.addToBattleLog(`Customer resistance decreased by ${finalDamage} points.`, 'normal');
                }
                
                // Update coaching panel with technique-specific advice
                this.updateCoachingWithTechnique(techniqueKey, insight);
                
                this.updateHealthBars();
                
                if (this.currentEnemy.health <= 0) {
                    this.winBattle();
                } else {
                    setTimeout(() => this.enemyResponse(), 2000);
                }
            }
            
            updateCoachingWithTechnique(techniqueKey, insight) {
                const coaching = document.getElementById('coaching-content');
                coaching.innerHTML = `
                    <h4>Technique Analysis: ${this.salesTechniques[techniqueKey].name}</h4>
                    <div class="psychology-insight">
                        <h5>📊 Effectiveness: ${insight.effective.toUpperCase()}</h5>
                        <p>${insight.advice}</p>
                    </div>
                    <div class="psychology-insight">
                        <h5>🎯 Next Steps:</h5>
                        <p>Consider following up with techniques that address their core concerns: ${this.currentEnemy.weaknesses.map(w => this.salesTechniques[w].name).join(', ')}</p>
                    </div>
                `;
            }
            
            enemyResponse() {
                const responses = [
                    "The customer seems unconvinced and raises another concern...",
                    "They're still hesitant and need more convincing...",
                    "The objection persists - they need a stronger argument...",
                    "They're considering your points but still have doubts..."
                ];
                
                const damage = Math.floor(Math.random() * 20) + 10;
                this.player.health = Math.max(0, this.player.health - damage);
                
                this.addToBattleLog(responses[Math.floor(Math.random() * responses.length)]);
                this.addToBattleLog(`🔍 Psychology Insight: ${this.getRandomPsychologyTip()}`, 'psychology');
                
                this.updateHealthBars();
                
                if (this.player.health <= 0) {
                    this.loseBattle();
                }
            }
            
            getRandomPsychologyTip() {
                const tips = [
                    "Customers often have hidden concerns beneath their stated objections. Listen for what they're not saying.",
                    "Building trust is more important than winning the argument. Focus on understanding, not convincing.",
                    "Every objection is actually a request for more information. What information do they really need?",
                    "Emotional decisions are justified with logic. Address both the feeling and the reasoning.",
                    "When customers delay, they're usually afraid of making the wrong choice. Help reduce their decision anxiety."
                ];
                return tips[Math.floor(Math.random() * tips.length)];
            }
            
            winBattle() {
                const xpGained = 50 + (this.currentEnemy.difficulty.length * 10);
                this.player.xp += xpGained;
                this.player.wins++;
                
                if (this.player.xp >= this.player.level * 100) {
                    this.player.level++;
                    this.player.maxHealth += 20;
                    this.player.health = this.player.maxHealth;
                }
                
                document.getElementById('xp-gained').textContent = xpGained;
                document.getElementById('new-level').textContent = this.player.level;
                
                const feedbacks = [
                    "You successfully built trust and addressed their concerns with expert-level sales techniques!",
                    "Your understanding of customer psychology helped you choose the perfect approach!",
                    "You demonstrated excellent objection handling skills and product knowledge!",
                    "Your professional approach and value demonstration won them over completely!"
                ];
                
                document.getElementById('victory-feedback').textContent = feedbacks[Math.floor(Math.random() * feedbacks.length)];
                
                this.showScreen('victory-screen');
            }
            
            loseBattle() {
                const feedbacks = [
                    "Consider focusing more on their emotional concerns before presenting logical arguments.",
                    "Try building more trust and credibility before addressing their specific objections.",
                    "Sometimes the stated objection isn't the real concern. Dig deeper with questions.",
                    "Remember: people buy from people they trust. Focus on relationship building first."
                ];
                
                document.getElementById('defeat-feedback').textContent = feedbacks[Math.floor(Math.random() * feedbacks.length)];
                
                this.showScreen('defeat-screen');
            }
            
            addToBattleLog(message, type = 'normal') {
                const logEntry = document.createElement('div');
                logEntry.className = `log-entry ${type}`;
                logEntry.textContent = message;
                
                const battleLog = document.getElementById('battle-log');
                battleLog.appendChild(logEntry);
                battleLog.scrollTop = battleLog.scrollHeight;
            }
            
            showScreen(screenId) {
                document.querySelectorAll('.game-screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(screenId).classList.add('active');
            }
            
            resetPlayer() {
                this.player.health = this.player.maxHealth;
            }
        }
        
        const game = new SalesTrainingGame();
        
        function startGame() {
            game.resetPlayer();
            game.showScreen('battle-screen');
            game.startNewBattle();
        }
        
        function showTutorial() {
            game.showScreen('tutorial-screen');
        }
        
        function showStartScreen() {
            game.showScreen('start-screen');
        }
        
        function nextBattle() {
            game.resetPlayer();
            game.startNewBattle();
            game.showScreen('battle-screen');
        }
        
        function retryBattle() {
            game.resetPlayer();
            game.currentBattleIndex--;
            game.startNewBattle();
            game.showScreen('battle-screen');
        }
    </script>


</body></html>